<!-- Loader pantalla completa -->
<div *ngIf="loading" class="flex items-center justify-center min-h-screen bg-gray-100 dark:bg-[#121212]">
  <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-solid"></div>
</div>

<!-- Contenido principal -->
<div *ngIf="!loading" class="flex flex-col min-h-screen">
  <!-- Header -->
  <header class="bg-white dark:bg-[#1a1a1d] shadow-md px-6 py-4 flex items-center justify-between transition-colors duration-300">
    <h1 class="text-xl font-bold text-gray-800 dark:text-white">
      Moodboard-app working
    </h1>

    <div class="flex gap-2">
      <!-- Dark Mode -->
      <button
        (click)="toggleDarkMode()"
        class="text-sm text-gray-700 dark:text-gray-200 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 px-3 py-1 rounded-md transition"
      >
        {{ darkMode ? 'â˜€ï¸ Light' : 'ğŸŒ™ Dark' }}
      </button>

      <!-- Register / Login o Logout -->
      <ng-container *ngIf="currentUser$ | async as user; else signedOut">
        <span class="px-2 py-1 text-gray-800 dark:text-white">Hola, {{ user.name || user.email }}</span>
        <button
          (click)="logout()"
          class="text-sm text-white bg-red-600 hover:bg-red-700 px-3 py-1 rounded-md transition"
        >
          Log Out
        </button>
      </ng-container>
      <ng-template #signedOut>
        <button
          (click)="register.openModal()"
          class="text-sm text-white bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded-md transition"
        >
          Register / Login
        </button>
      </ng-template>

      <!-- Settings -->
      <button
        (click)="settings.openModal()"
        class="text-sm text-white bg-green-600 hover:bg-green-700 px-3 py-1 rounded-md transition"
      >
        âš™ï¸ Settings
      </button>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-grow bg-gray-100 dark:bg-[#121212] p-6 pt-4 transition-colors duration-300">
    <div class="flex justify-center mb-8">
      <app-form (itemAdded)="addItem($event)"></app-form>
    </div>
    <app-moodboard [items]="items"></app-moodboard>
  </main>

  <!-- Modales -->
  <app-register #register (userAdded)="handleUserAdded($event)"></app-register>
  <app-settings #settings></app-settings>

  <!-- Footer -->
  <footer class="bg-white dark:bg-[#1a1a1d] text-center text-xs text-gray-500 dark:text-gray-400 py-4 transition-colors duration-300">
    <p class="mb-1">All Rights Reserved Â© 2025.</p>
    <p>Â© 2025 
      <a href="https://github.com/rarubinat" target="_blank" rel="noopener noreferrer" class="underline hover:text-black dark:hover:text-white">
        rarubinat
      </a>
    </p>
  </footer>
</div>
